# Система управления инцидентами

Веб-приложение на базе Flask для управления заявками пользователей и инцидентами. Система предоставляет функционал аутентификации пользователей, управления заявками и инцидентами с учетом ролевого доступа (пользователи и специалисты).

## Описание

Это веб-приложение позволяет пользователям создавать и управлять своими заявками, а специалистам — обрабатывать и решать инциденты. Приложение построено с использованием Flask, SQLite в качестве базы данных и Flask-Login для управления сессиями пользователей.

## Возможности

- **Аутентификация пользователей:**
  - Регистрация с указанием имени пользователя, пароля и роли.
  - Вход и выход из системы.

- **Панель управления (Dashboard):**
  - Отображение статистики: количество открытых заявок, общее число пользователей и инцидентов (для специалистов).

- **Управление заявками:**
  - Создание новых заявок с заголовком и описанием.
  - Просмотр списка своих открытых заявок.
  - Закрытие собственных заявок.

- **Управление инцидентами (только для специалистов):**
  - Просмотр списка всех открытых инцидентов.
  - Просмотр деталей конкретного инцидента.
  - Решение инцидента с указанием описания решения.

- **Управление пользователями (только для специалистов):**
  - Просмотр списка всех пользователей.
  - Просмотр и обновление данных конкретного пользователя.

## Установка

Чтобы установить и запустить проект, выполните следующие шаги:

1. **Клонируйте репозиторий:**
   ```bash
   git clone https://github.com/reallyShould/Tokyo.git
   ```
2. **Перейдите в директорию проекта:**
   ```bash
    cd Tokyo
   ```
3. **Создайте виртуальное окружение:**
   ```bash
   python3 -m venv venv
   ```
   - Для Windows:
   ```bash
   venv\Scripts\activate
   ```
   - Для Linux/macOS
   ```bash
   source venv/bin/activate
   ```
4. **Установите зависимости**
   ```bash
   pip install -r requirements.txt
   ```
5. **Запуск**
   ```bash
   python3 app.py
   ```
## Использование

После запуска приложения перейдите по адресу `http://localhost:3276`.

- **Регистрация:** Создайте новую учетную запись.
- **Вход:** Войдите, используя свои учетные данные.
- **Панель управления:** Просматривайте статистику и переходите к другим разделам.
- **Заявки:** Управляйте своими заявками.
- **Инциденты (только для специалистов):** Управляйте инцидентами.
- **Пользователи (изменение только для специалистов):** Управляйте данными пользователей.

## Конфигурация

Настройки приложения находятся в файле `config.py`. Основные параметры:

- `HOST`: Хост для запуска приложения (по умолчанию: "0.0.0.0").
- `PORT`: Порт для запуска приложения (по умолчанию: "3276").
- `SECRET_KEY`: Секретный ключ для сессий Flask.
- `SQLALCHEMY_DATABASE_URI`: Путь к базе данных SQLite (по умолчанию: 'instance/data.db').

## Структура проекта

```
Tokyo
├── instance/
│   ├── data.db
│   └── empty
├── routes/
│   ├── __init__.py
│   ├── auth_routes.py
│   ├── dashboard_routes.py
│   ├── incidents.py
│   ├── requests.py
│   └── users_list.py
├── static/
│   └── styles.css
├── templates/
│   ├── 403.html
│   ├── 404.html
│   ├── base.html
│   ├── create_request.html
│   ├── dashboard.html
│   ├── incident_detail.html
│   ├── login.html
│   ├── register.html
│   ├── requests.html
│   ├── resolve_incident.html
│   ├── user_detail.html
│   └── users.html
├── .gitignore
├── app.py
├── config.py
├── format_table.py
├── Makefile
├── models.py
├── README.md
└── req.txt
```

## Описание структуры

## Описание структуры

- **`instance/`**: Директория для хранения базы данных SQLite (`data.db`) и, возможно, других данных.
- **`routes/`**: Директория с маршрутами (blueprints) для Flask-приложения:
  - `auth_routes.py`: Маршруты для аутентификации (регистрация, вход, выход, dashboard).
  - `dashboard_routes.py`: Маршруты для панели управления (пустой в текущем коде).
  - `incidents.py`: Маршруты для управления инцидентами (для специалистов).
  - `requests.py`: Маршруты для управления заявками.
  - `users_list.py`: Маршруты для управления пользователями (для специалистов).
- **`static/`**: Директория для статических файлов, таких как стили (`styles.css`).
- **`templates/`**: Директория с HTML-шаблонами для рендеринга страниц:
  - `403.html`, `404.html`: Страницы ошибок.
  - `base.html`: Базовый шаблон для остальных страниц.
  - `create_request.html`, `dashboard.html`, `incident_detail.html`, `login.html`, `register.html`, `requests.html`, `resolve_incident.html`, `user_detail.html`, `users.html`: Шаблоны для соответствующих страниц.
- **`.gitignore`**: Файл для исключения ненужных файлов из Git (например, виртуального окружения).
- **`app.py`**: Главный файл приложения Flask.
- **`config.py`**: Файл конфигурации с настройками (хост, порт, путь к базе данных и т.д.).
- **`format_table.py`**: Утилита для форматирования данных (например, функция `change_names`).
- **`Makefile`**: Файл для автоматизации задач (например, запуск, установка зависимостей).
- **`models.py`**: Модели данных (например, классы `User` и `Users` для работы с пользователями и базой данных).
- **`README.md`**: Документация проекта.
- **`req.txt`**: Файл с зависимостями (вероятно, это `requirements.txt`).

## Схема базы данных

Приложение использует SQLite с двумя основными таблицами:

- **users (пользователи):**
  - `id`: Integer, первичный ключ
  - `username`: Text, уникальный, не null
  - `fullname`: Text
  - `mail`: Text
  - `spec`: Text
  - `password_hash`: Blob, не null
  - `role`: Text, не null, по умолчанию 'user'

- **requests (заявки):**
  - `id`: Integer, первичный ключ
  - `user_id`: Integer, внешний ключ, ссылается на `users.id`
  - `title`: Text, не null
  - `description`: Text
  - `status`: Text, по умолчанию 'open'
  - `resolution`: Text
  - `created_at`: Timestamp, по умолчанию текущая дата и время

## Для тех кто долистал

- Любое имя коммита не имеет никакого смысла, тем более связанного с проектом. 
- Проект предназначен только для понимания разработки Web-проектов и сдачи диплома. 
- Текущий readme может случайно не обновиться вместе с проектом. 
- Имя проекта временное и может поменяться
- А еще ты прав, я действительно плюнул тебе в кофе ^_^